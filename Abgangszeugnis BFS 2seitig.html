{#each schueler as s (s.ID)}
  {#each s.abschnitte.filter(aktHalbjahr) as hj (hj.ID)}
    <div class="page grid" orientation="portrait" size="A4">
      <Seitenlogo logo="{privat.traegerLogo}"/>
      <Pageheader art="daten/agz.svg" logo="{privat.logo}" untertitel="{privat.untertitel}"/>
      <div class="main">
        <div style="font-size: 15pt; line-height: 1.5em">
          {bg(s, 'Schulform')}
        </div>
        <div style="font-size: 12pt; line-height: 1.2em">
          {bg(s, 'Bereich')}
          {#if s.ASDSchulform.startsWith('B')}
            <br />
            Abschluss {s.Geschlecht === '3' ? bg(s, 'Berufsbezeichnung_m') : bg(s, 'Berufsbezeichnung_w')}
          {/if}
        </div>
        <Voffset v="1"/>
        <b>{s.anrede} {s.Vorname} {s.Zusatz || ''} {s.Name},</b>
        <br />geboren am {datum(s.Geburtsdatum)} in {s.Geburtsort},<br />
        war vom {datum(s.BeginnBildungsgang)} bis {datum(s.Entlassdatum)} {s.schueler_in}
        des Bildungsgangs {bg(s, 'Zeugniskopf')}.
        {s.Geschlecht === 3 ? 'Er':'Sie'} war zuletzt {s.schueler_in} in der Klasse {s.Klasse}.
        <Voffset v="2"/>
        Leistungen laut Konferenzbeschluss vom {datum(hj.Konferenzdatum)}:
        <Noten
          noten={hj.noten}
          fachGliederungen={s.fachklasse.fach_gliederungen}
          ger
          fachklasse={s.fachklasse.Kennung}
        ></Noten>
        <hr />
        <Voffset v="1"/>
        <b>{versetzungsvermerk(s,hj, true)}</b>
        <Voffset v="1"/>
        <b>Bemerkungen</b><br />{@html bemerkungen(hj)}
      </div>
      <div class="footer">
        <div class="flex-grid">
          <div class="col-2">
            {schule.Ort}, den {datum(hj.ZeugnisDatum)}
          </div>
          <div class="col text-center klein">
          <Voffset v="3"/>
            <hr />
            {schule.SchulleiterVorname} {schule.SchulleiterName} <br />{schule.schulleiter_in}
          </div>
          <div class="col text-center klein">
          <Voffset v="3"/>
            Siegel
          </div>
          <div class="col text-center klein">
          <Voffset v="3"/>
            <hr />
            {hj.v_name_klassenlehrer}<br />{hj.klassenlehrer_in}
          </div>
        </div>
        <Fussnote {schule} ger rechtsbehelfsbelehrung={false} verordnung={false}></Fussnote>
      </div>
    </div>
    <div class="page grid" orientation="portrait" size="A4">
      <div class="main">
        Seite 2/2 des Abgangsszeugnisses f√ºr {s.anrede} {s.Vorname} {s.Zusatz || ''} {s.Name}
        <Voffset v="2"/>
        <SoaTabelle></SoaTabelle>
      </div>
      <div class="footer">
        <Fussnote {schule} bfs notenstufen={false}></Fussnote>
      </div>
    </div>
  {/each}
{/each}

<script>
  import { datum, versetzungsvermerk, volljaehrigBei, bemerkungen, bg }  from './helfer'

  export default {
    components: {
      Seitenlogo: './partials/Seitenlogo.html',
      Pageheader: './partials/Pageheader.html',
      Noten: './partials/Noten.html',
      Fussnote: './partials/Fussnoten.html',
      Voffset: './partials/Voffset.html',
      SoaTabelle: './partials/SOA-Tabelle.html'
    },
    helpers: { bg, datum, versetzungsvermerk, volljaehrigBei, bemerkungen, _ },
    computed: {
      aktHalbjahr: ({jahr, abschnitt}) => { return a => a.Jahr === jahr && a.Abschnitt === abschnitt }
    }
  }
</script>

<style>
  @import 'css/main.css';
</style>
